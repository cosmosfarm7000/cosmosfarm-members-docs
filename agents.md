# Cosmosfarm Members Agents Guide

이 문서는 `cosmosfarm-members-docs` 저장소에서 액션 훅과 필터 훅 문서를 개별 파일로 관리하기 위한 작업 지침을 정리합니다. 모든 작업은 PM의 조율 아래에서 진행하며, 프론트엔드 엔지니어와 백엔드 엔지니어가 역할을 분담해 문서 품질을 확보합니다.

## 협업 역할 구조
- **PM**: 훅 문서화 범위를 정의하고 우선순위를 결정합니다. 일정과 담당자를 지정하고 산출물을 검토해 승인합니다.
- **프론트엔드 엔지니어**: 훅이 노출되는 화면 또는 UI 변화를 확인하고, 프론트 레이어에서 필요한 예제와 주의 사항을 문서에 반영합니다.
- **백엔드 엔지니어**: 훅이 선언된 코드 위치와 실행 플로우를 분석하고, 인자 정의·예제 코드·주의 사항을 작성합니다. 필요 시 테스트 코드나 로깅 방법을 제안합니다.
- **공동 규칙**: 모든 수정은 PM에게 공유하고, 리뷰 코멘트는 Git 기록(커밋 메시지 또는 PR 코멘트)에 남깁니다.

## PM 주도 작성 절차
1. **작업 기획 (PM)**: 문서화할 훅을 선정하고 목적, 예상 독자, 마감일을 노션/이슈에 기록합니다.
2. **역할 할당 (PM)**: 훅 특성에 따라 담당 백엔드/프론트엔드 엔지니어를 지정합니다. 문서 링크와 체크리스트를 배포합니다.
3. **소스 분석 (백엔드)**: 훅 선언부와 주변 로직을 파악하고, 실행 조건·전달 인자·반환값을 정리합니다.
4. **UI 영향 검토 (프론트엔드)**: 화면 노출 지점, 스크립트 의존성, 스타일 변동 여부를 확인하고 필요한 안내를 수집합니다.
5. **초안 작성 (백엔드 중심, 프론트 협력)**: 아래 문서 구조와 템플릿을 활용해 초안을 작성하고, 프론트 의견을 반영합니다.
6. **내부 리뷰 (PM)**: 체크리스트를 기반으로 초안을 검토하고, 누락 또는 애매한 부분에 대해 피드백을 남깁니다.
7. **수정 및 확정 (담당자 + PM 승인)**: 피드백을 반영하여 수정하고, PM에게 최종 검토를 받은 뒤 `actions.md` 또는 `filters.md` 인덱스를 갱신합니다.

## 문서 구조
- `actions/` 폴더: `do_action()`으로 호출되는 훅을 훅 이름과 동일한 파일명(`{hook-name}.md`)으로 정리합니다.
- `filters/` 폴더: `apply_filters()`로 호출되는 훅을 훅 이름과 동일한 파일명(`{hook-name}.md`)으로 정리합니다.
- `actions.md`, `filters.md`: 훅 목록과 개요를 제공하며, 세부 설명 파일로 연결하는 인덱스 역할을 유지합니다.
- `agents.md`: 훅 문서를 작성하거나 검수하는 담당자를 위한 지침을 제공합니다.

## 문서 템플릿
각 훅 문서는 다음 섹션을 기본으로 포함합니다.

```markdown
# {hook_name}

- **분류**: Action | Filter
- **정의 위치**: `상대/파일/경로.php:줄번호`
- **실행 시점**: 훅이 호출되는 흐름과 조건을 간단히 기술합니다.
- **인자 정보**:
  - `$arg1 (타입)`: 설명
  - `$arg2 (타입)`: 설명
- **예제 코드**:
  ```php
  add_action('{hook_name}', 'my_callback', 10, 인자수);
  function my_callback($arg1, $arg2) {
      // 실행 로직
  }
  ```
- **주의 사항**: 버전 호환성, 필수 전제 조건, 중복 실행 가능성 등
- **관련 훅**: 함께 사용되는 다른 액션/필터가 있다면 나열
```

### 인자 설명 가이드
- 각 파라미터마다 **타입**, **null/옵션 여부**, **주요 메서드나 속성**, **관련 전처리·후처리 로직**을 함께 정리합니다.
- 객체가 전달되는 경우 문서에서 바로 활용 가능한 대표 메서드(예: ID(), get_items(), $object->property)를 예시로 나열하고, 읽기 전용인지 변경 가능한지 표시합니다.
- 배열이나 스칼라 값이라면 키 구조, 예상 가능한 값 목록, 단위 등을 명시합니다.
- 파라미터가 외부 입력(POST, GET 등)을 그대로 포함할 수 있다면 필수 필터링/검증 방법을 언급합니다.

필요 시 다음과 같은 보조 섹션을 추가할 수 있습니다.
- **변경 이력**: `YYYY-MM-DD - 변경 내용` 형식으로 정리
- **참고 링크**: 외부 문서나 코드 위치 링크

## 작성 원칙 (역할별 포커스)
- **PM**: 문서 목적과 독자가 명확한지, 작성 범위가 합리적인지 확인합니다. 최종 승인 전에 체크리스트를 재검토합니다.
- **프론트엔드 엔지니어**: UI나 스크립트 의존성이 있다면 조건·우선순위·주의 사항을 명시합니다. 예제 코드가 프런트 작업에 바로 활용될 수 있도록 작성합니다.
- **백엔드 엔지니어**: 인자 타입, 반환값, 훅 실행 조건을 실제 코드와 일치하도록 서술합니다. 필요한 경우 테스트 방법이나 로그 확인 팁을 제시합니다.
- **공동**: 설명은 간결하고 실용적이어야 하며, 사용자가 바로 복사해 테스트할 수 있는 예제를 제공합니다.

## 검수 체크리스트
- 템플릿의 필수 항목이 빠지지 않았는가? (PM)
- 예제 코드가 문법적으로 올바른가? (백엔드)
- 매개변수 설명이 실제 전달되는 데이터와 일치하는가? (백엔드)
- 화면/UI 영향이 있는 경우 관련 안내가 포함되었는가? (프론트엔드)
- 관련 훅 또는 참고 링크가 있다면 연결했는가? (프론트/백엔드)
- `actions.md` 또는 `filters.md` 인덱스에 링크를 추가했는가? (담당자, PM 확인)

상기 지침을 기반으로 역할별 책임을 명확히 하고 PM 주도 아래 협업하면, 플러그인 사용자가 필요한 정보를 빠르게 찾고 안정적으로 커스터마이징할 수 있습니다.
